const localTitle='\n<hr class="separatorLine">\n<h2 class="localHeader" aria-label="{HEADER_LABEL}">{LOCAL_HEADER}</h2><br>';function buildLocalTitle(e){let a=e.replace(/<br>/g," ");return localTitle.replace("{HEADER_LABEL}",a).replace("{LOCAL_HEADER}",e)}const rcRaceHtml='\n  <div class="selectionContest">\n    <h2 id="contest_{CONTEST_INDEX}" class="contestName" tabindex="0">\n      {CONTEST_NAME}<br>{CONTEST_SUBTITLE}\n      <p class="votingInstructions">{VOTING_INSTRUCTIONS}</p>\n    </h2>    \n    <table class="table" aria-labelledby="contest_{CONTEST_INDEX}">\n      <tr class="row header">\n          <th scope="col" class="cell">Candidate</th> \n          {RANKS}\n      </tr>\n      {CANDIDATES}\n    </table>\n  </div>\n',rRaceHtml='\n  <div class="selectionContest">\n    <h2 id="contest_{CONTEST_INDEX}" class="contestName" tabindex="0">\n      {CONTEST_NAME}<br>{CONTEST_SUBTITLE}\n      <p class="votingInstructions">{VOTING_INSTRUCTIONS}</p>         \n    </h2>     \n    <div class="regCandidates">\n      {CANDIDATES}\n    </div>\n  </div>\n',rcCandidateHtml='\n  <tr class="row" tabindex="0">\n    <th scope="row" class="cell" data-title="Candidate">\n      <div class="candidateName">{CANDIDATE_NAME}</div>\n      <span class="candidateSubtitle">{CANDIDATE_SUBTITLE}</span>      \n    </th>\n    {OVALS}\n  </tr>\n',rcWriteinHtml='\n  <tr class="row">\n    <th scope="row" class="cell" data-title="Candidate">\n      <div id="{WRITEIN_HEADER_ID}_wh" class="candidateName">Write-in:</div>\n      <div id="{WRITEIN_ID}_w" class="writeinName"></div>\n    </th>\n    {OVALS}\n  </tr>\n',ovalHtml='\n  <td class="cell">\n    <input type="checkbox" id="{OVAL_ID}" class="c2 rcOval" aria-label="{OVAL_ARIA_LABEL}">      \n  </td>\n',candidateRegLine='\n  <div class="indivCandidate" >\n    <div class="candidateNameDiv" aria-hidden="true">\n      <div class="candidateName">{CANDIDATE_NAME}</div>\n      <span class="candidateSubtitle">{CANDIDATE_SUBTITLE}</span>        \n    </div>\n    <input type="checkbox" id="{OVAL_ID}" class="c2 regularRaceOval" aria-label="{CANDIDATE_ARIA_LABEL}">    \n  </div>\n',candidateRegWriteIn='\n  <div class="indivCandidate">\n    <div id="{OVAL_ID}_wh" class="candidateName" aria-hidden="true">Write-in:</div>\n    <div id="{OVAL_ID}_w" class="writeinName" aria-hidden="true"></div>\n    <input type="checkbox" id="{OVAL_ID}" class="c2 regularRaceOval" aria-label="{WRITEIN_ARIA_LABEL}">\n  </div>\n',qRaceHtml='\n  <div class="selectionContest">\n    <h2 id="contest_{CONTEST_INDEX}" class="contestName" tabindex="0">\n      {CONTEST_NAME}<br>{CONTEST_SUBTITLE}\n      <p class="votingInstructions">{VOTING_INSTRUCTIONS}</p>  \t\n    </h2>                  \n\t<div class="questionDiv">\n      <p class="question">{QUESTION_TEXT}</p>\n      <div class="questionOptionsDiv">\n        {QUESTION_OPTIONS}\n      </div>\n    </div>\n  </div>\n',questionOption='\n  <div class="questionOption candidateLabel">\n    <div class="candidateNameDiv" aria-hidden="true">\n      <div class="candidateName">{CANDIDATE_NAME}</div>\n    </div>\n    <input type="checkbox" id="{OVAL_ID}" class="c2 questionRaceOval" aria-label="{OPTION_ARIA_LABEL}">  \n  </div>\n';function buildRace(e,a){let n="";return data.includes("UOCAVA Ballot")||(n="Contest "+(a+1)+" of "+ballot.contests.length+"<br>"),"RC"===e.contestType?buildRankChoiceRace(e,a,n):"Q"===e.contestType?buildQuestionRace(e,a,n):buildRegRace(e,a,n)}function buildRegRace(e,a,n){return rRaceHtml.replace(/{CONTEST_INDEX}/g,a).replace(/{CONTEST_NAME}/g,n+e.contestName).replace(/{CONTEST_SUBTITLE}/g,e.contestSubtitle).replace(/{VOTING_INSTRUCTIONS}/g,e.votingInstructions).replace(/{VOTE_LIMIT}/g,e.voteFor).replace(/{CANDIDATES}/g,buildRegCandidates(e,a))}function buildRegCandidates(e,a){let n="";return e.candidates.forEach((e,t)=>{e.candidateCode.includes("writein")?n+=candidateRegWriteIn.replace(/{OVAL_ID}/g,a+"_"+t).replace(/{WRITEIN_ARIA_LABEL}/g,buildWriteinAriaLabel(a,t)):n+=candidateRegLine.replace(/{CANDIDATE_HEADER_ARIA}/g,buildCandidateAriaLabel(a,t)).replace(/{CANDIDATE_NAME}/g,e.candidateName).replace(/{OVAL_ID}/g,a+"_"+t).replace(/{CANDIDATE_ARIA_LABEL}/g,buildCandidateAriaLabel(a,t)).replace(/{CANDIDATE_SUBTITLE}/g,e.candidateSubtitle)}),n}function buildQuestionOptions(e,a){let n="";return e.candidates.forEach((e,t)=>{n+=questionOption.replace(/{CANDIDATE_NAME}/g,e.candidateName).replace(/{OVAL_ID}/g,a+"_"+t).replace(/{OPTION_ARIA_LABEL}/g,buildOptionAriaLabel(a,t))}),n}function buildOptionAriaLabel(e,a){let n="";return n+=ballot.contests[e].candidates[a].candidateName+" for "+ballot.contests[e].contestName}function buildQuestionRace(e,a,n){let t=e.questionText.join("\\n");return qRaceHtml.replace(/{CONTEST_INDEX}/g,a).replace(/{CONTEST_NAME}/g,n+e.contestName).replace(/{CONTEST_SUBTITLE}/g,e.contestSubtitle).replace(/{VOTING_INSTRUCTIONS}/g,e.votingInstructions).replace(/{QUESTION_TEXT}/g,t.replace(/\\n/g,"<br>")).replace(/{CONTEST_INDEX}/g,a).replace(/{QUESTION_OPTIONS}/g,buildQuestionOptions(e,a))}function buildRankChoiceRace(e,a,n){choiceClassName(e.candidates.length);return rcRaceHtml.replace(/{CONTEST_INDEX}/g,a).replace(/{CONTEST_NAME}/g,n+e.contestName).replace(/{CONTEST_SUBTITLE}/g,e.contestSubtitle).replace(/{VOTING_INSTRUCTIONS}/g,e.votingInstructions).replace(/{RANKS}/g,buildRankHeaders(e)).replace(/{CANDIDATES}/g,buildRcCandidates(e,a))}function buildRankHeaders(e){const a='<th class="cell">\n    <div class="choice">{RANK} Choice</div>\n  </th>';let n="",t=1;return e.candidates.forEach(e=>{n+=a.replace(/{RANK}/g,choiceLabel(t)),t++}),n}function buildRcCandidates(e,a){let n="";return e.candidates.forEach((t,i)=>{t.candidateCode.includes("writein")?n+=rcWriteinHtml.replace(/{WRITEIN_HEADER_ID}/g,`${a}_${i}`).replace(/{WRITEIN_ID}/g,`${a}_${i}`).replace(/{OVALS}/g,buildRcCandidateOvals(e,a,i)):n+=rcCandidateHtml.replace(/{CANDIDATE_NAME}/g,t.candidateName).replace(/{CANDIDATE_NAME_ARIA}/g,candidateInfoString(a,i)).replace(/{CANDIDATE_SUBTITLE}/g,t.candidateSubtitle).replace(/{OVALS}/g,buildRcCandidateOvals(e,a,i))}),n}function buildRcCandidateOvals(e,a,n){let t="";if(e.candidates[n].candidateCode.includes("writein"))for(let i=0;i<e.candidates.length;i++)t+=ovalHtml.replace(/{OVAL_ID}/g,`${a}_${n}_${i}`).replace(/{OVAL_ARIA_LABEL}/g,`${choiceLabel(i+1)} choice Write-in`);else for(let i=0;i<e.candidates.length;i++)t+=ovalHtml.replace(/{OVAL_ID}/g,`${a}_${n}_${i}`).replace(/{OVAL_ARIA_LABEL}/g,`${choiceLabel(i+1)} choice ${candidateInfoString(a,n)}`);return t}function choiceClassName(e){let a;return a=e<4?"choices-2-3":e<6?"choices-4-5":e<8?"choices-6-7":e<10?"choices-8-9":"choices-10-plus"}function choiceLabel(e){let a;return a=1==e?"1st":2==e?"2nd":3==e?"3rd":e+"th"}function candidateInfoString(e,a){let n="";const t=ballot.contests[e].candidates[a];let i="";return n+=i=t.candidateCode.includes("writein")?"Write-in:":t.candidateName.replace(/<br>/g," and ")+" - "+t.candidateSubtitle.replace(/<br>/g," ")}function shortenedName(e,a){const n=ballot.contests[e].candidates[a];let t=n.candidateName.split("<br>");if(t.length>1){let e=new Array;for(let a of t)e.push(a.split(",")[0]);return e.join(" and ")}return n.candidateName}function buildCandidateAriaLabel(e,a){let n="";return n+=candidateInfoString(e,a)}function buildWriteinAriaLabel(e,a){let n="";return n+="Write-in","Write-in"}function fullNameAria(e,a){const n=ballot.contests[e].candidates[a];return`${n.candidateName} ${n.candidateSubtitle}`}